var s=(a,e,t)=>new Promise((i,o)=>{var u=r=>{try{n(t.next(r))}catch(c){o(c)}},d=r=>{try{n(t.throw(r))}catch(c){o(c)}},n=r=>r.done?i(r.value):Promise.resolve(r.value).then(u,d);n((t=t.apply(a,e)).next())});import{renderListWithTemplate as l}from"./utils.js";export default class m{constructor(e,t,i){this.category=e,this.dataSource=t,this.listElement=i}init(){return s(this,null,function*(){const e=yield this.dataSource.getData(this.category);this.renderList(e),document.querySelector(".title")&&(document.querySelector(".title").innerHTML=this.category),document.querySelector("#breadcrumb")&&(document.querySelector("#breadcrumb").innerHTML=this.renderBreadCrumb(e)),this.renderSortBy()})}prepareTemplate(e,t){return e.querySelector("a").href+=t.Id,e.querySelector("img").src=t.Images.PrimaryMedium,e.querySelector("img").alt+=t.Name,e.querySelector(".card__brand").textContent=t.Brand.Name,e.querySelector(".card__name").textContent=t.NameWithoutBrand,e.querySelector(".product-card__discount").textContent+=t.SuggestedRetailPrice,e.querySelector(".product-card__price").textContent+=t.FinalPrice,e}renderList(e){this.listElement.innerHTML="";const t=document.getElementById("product-card-template");l(t,this.listElement,e,this.prepareTemplate),document.querySelector("#breadcrumb")&&(document.querySelector("#breadcrumb").innerHTML=this.category)}renderBreadCrumb(e){return`<p>${this.category} -> ${e.length} items </p>
    `}}
